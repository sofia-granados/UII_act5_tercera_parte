{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="card shadow-sm">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0">üëÅÔ∏è Detalles del Cliente</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- Informaci√≥n del cliente -->
                    <div class="col-md-6">
                        <h3 class="text-primary">{{ cliente.nombre }} {{ cliente.apepaterno }} {{ cliente.apematerno }}</h3>
                        <p class="text-muted">ID: {{ cliente.id_cliente }}</p>
                        
                        <div class="card mb-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">üìû Informaci√≥n de Contacto</h6>
                            </div>
                            <div class="card-body">
                                <p><strong>Correo:</strong> {{ cliente.correo }}</p>
                                <p><strong>Tel√©fono:</strong> {{ cliente.telefono }}</p>
                                <p><strong>Domicilio:</strong> {{ cliente.domicilio|default:"No especificado" }}</p>
                                <p><strong>Alergias:</strong> {{ cliente.alergias|default:"Ninguna registrada" }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mascotas del cliente -->
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h6 class="mb-0">üêï Mascotas ({{ cliente.animales_poseidos.count }})</h6>
                            </div>
                            <div class="card-body">
                                {% if cliente.animales_poseidos.all %}
                                    <div class="row">
                                        {% for mascota in cliente.animales_poseidos.all %}
                                        <div class="col-12 mb-3">
                                            <div class="card bg-light">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-3">
                                                            {% if mascota.imagen %}
                                                                <img src="{{ mascota.imagen.url }}" alt="{{ mascota.nombre }}" 
                                                                     class="img-fluid rounded" style="max-height: 80px; object-fit: cover;">
                                                            {% else %}
                                                                <div class="text-center text-muted" style="height: 80px; line-height: 80px;">
                                                                    üêæ
                                                                </div>
                                                            {% endif %}
                                                        </div>
                                                        <div class="col-9">
                                                            <h6 class="card-title">{{ mascota.nombre }}</h6>
                                                            <p class="card-text mb-1">
                                                                <strong>Especie:</strong> {{ mascota.especie }}<br>
                                                                <strong>Edad:</strong> {{ mascota.edad|default:"?" }}<br>
                                                                <strong>Peso:</strong> {{ mascota.peso }}kg
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <div class="alert alert-warning text-center">
                                        <p class="mb-0">Este cliente no tiene mascotas registradas.</p>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Botones de acci√≥n -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{% url 'actualizar_cliente' cliente.id_cliente %}" class="btn btn-warning me-md-2">
                                ‚úèÔ∏è Editar Cliente
                            </a>
                            <a href="{% url 'borrar_cliente' cliente.id_cliente %}" class="btn btn-danger me-md-2">
                                üóëÔ∏è Eliminar Cliente
                            </a>
                            <a href="{% url 'ver_clientes' %}" class="btn btn-secondary">
                                ‚Ü©Ô∏è Volver a la Lista
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}